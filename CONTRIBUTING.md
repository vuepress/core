# Contributing Guide

## Overview

This repository employs a [monorepo](https://en.wikipedia.org/wiki/Monorepo) setup with [pnpm workspaces](https://pnpm.io/workspaces), and hosts a number of associated but separated packages.

In the `packages` directory:

- `bundler-vite`: The VuePress bundler package with vite. Use vite to `dev` and `build` VuePress app that generated by `@vuepress/core`.
- `bundler-webpack`: The VuePress bundler package with webpack. Use webpack to `dev` and `build` VuePress app that generated by `@vuepress/core`.
- `cli`: The VuePress command line interface (CLI) package. It will resolve user config file, and create VuePress app with `@vuepress/core`, then execute corresponding command.
- `client`: The VuePress client package. Provides the client entry, and exports types and composable utils that can be used in client side development.
- `core`: The VuePress core. Provides pure Node API to generate VuePress app, including page handling, plugin system and data preparation.
- `markdown`: The VuePress markdown package. Use `markdown-it` as the markdown parser and integrate some plugins to be used in VuePress.
- `shared`: Utilities that shared between node side and client side.
- `utils`: Utilities that should only be used in node side.

Here are some wrapper packages that use the above packages:

- `vuepress`: A wrapper of `vuepress-vite`.
- `vuepress-vite`: A wrapper of `@vuepress/cli` + `@vuepress/bundler-vite`. If users want to use vite, they can simply install this package.
- `vuepress-webpack`: A wrapper of `@vuepress/cli` + `@vuepress/bundler-webpack`. If users want to use webpack, they can simply install this package.

## Development Setup

Pre-requirement:

- [Node.js](http://nodejs.org) **version 18.16.0+**
- [pnpm](https://pnpm.io/) **version 8+**

Clone the repo, and install dependencies:

```bash
pnpm install
```

Build source code:

```bash
pnpm build
```

Main tools that used in this project:

- [TypeScript](https://www.typescriptlang.org/) as the development language
- [Vitest](https://vitest.dev/) for unit testing
- [ESLint](https://eslint.org/) + [Prettier](https://prettier.io/) for code linting and formatting

## Scripts

### `pnpm build`

The `build` script uses `tsup` to compile TypeScript source files to JavaScript dist files.

Also, it will copy necessary resources from source directory to dist directory, because some source files (e.g. `.vue`, `.css` files) would not be processed by `tsup`, but should keep the same relative path in the dist directory.

You may need to run this script first after your clone this repository, because the dist files are ignored by `.gitignore`.

### `pnpm clean`

The `clean` script runs `clean` script in all packages, cleaning all the dist files and caches. In other words, it will remove all the files that generated by `build` scripts.

It's used before you want to re-build source files from a clean / initial state.

### `pnpm lint`

The `lint` script uses ESLint to check all source files.

### `pnpm test`

The `test` script uses Vitest to run unit testings.

## Documentation

VuePress documentation is maintained in [vuepress/docs](https://github.com/vuepress/docs) repository.
